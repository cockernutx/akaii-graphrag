{"schemas":"DEFINE TABLE OVERWRITE entity SCHEMAFULL;\n\nDEFINE FIELD OVERWRITE id ON entity TYPE string;\n\nDEFINE FIELD OVERWRITE data ON entity FLEXIBLE TYPE object DEFAULT {};\n\nDEFINE FIELD OVERWRITE creation_date ON entity TYPE datetime DEFAULT time::now() READONLY;\n\n\nDEFINE FIELD OVERWRITE title_embeddings ON TABLE entity TYPE array<float> ASSERT array::len($value) = 1024;\nDEFINE INDEX OVERWRITE embeddings_vector_index ON entity\n    FIELDS title_embeddings\n    HNSW DIMENSION 1024;\nDEFINE TABLE OVERWRITE entity_history SCHEMAFULL;\n\nDEFINE FIELD OVERWRITE id ON entity_history TYPE array<record<entity> | datetime, 2>;\n\nDEFINE FIELD OVERWRITE difference ON entity_history TYPE array<{\n    op: string,\n    path: string,\n    value: any\n}>;\n\n\nDEFINE TABLE OVERWRITE input_article SCHEMAFULL;\n\nDEFINE FIELD OVERWRITE text ON input_article TYPE string;\n\nDEFINE FIELD OVERWRITE metadata ON input_article FLEXIBLE TYPE object;\n\nDEFINE FIELD OVERWRITE creation_date ON input_article TYPE datetime DEFAULT time::now() READONLY;\n\nDEFINE FIELD OVERWRITE mentions_entity ON input_article TYPE set<record<entity>> DEFAULT [];\n\nDEFINE FIELD OVERWRITE chunks ON TABLE input_article \n    TYPE array<record<input_article_chunk>> \n    VALUE array::distinct(\n        SELECT VALUE id FROM input_article_chunk WHERE article = $parent.id\n    ) DEFAULT [];\nDEFINE TABLE OVERWRITE input_article_chunk SCHEMAFULL;\n\nDEFINE FIELD OVERWRITE article ON TABLE input_article_chunk TYPE record<input_article>;\nDEFINE FIELD OVERWRITE chunk_text ON TABLE input_article_chunk TYPE string;\nDEFINE FIELD OVERWRITE embeddings ON TABLE input_article_chunk TYPE array<float, 1024>;\n\nDEFINE INDEX OVERWRITE hnsw_embeddings ON TABLE input_article_chunk \n    FIELDS embeddings \n    HNSW DIMENSION 1024;\nDEFINE TABLE OVERWRITE script_migration SCHEMAFULL\n    PERMISSIONS\n        FOR select FULL\n        FOR create, update, delete NONE;\n\nDEFINE FIELD OVERWRITE script_name ON script_migration TYPE string;\nDEFINE FIELD OVERWRITE executed_at ON script_migration TYPE datetime VALUE time::now() READONLY;","events":"\nDEFINE EVENT OVERWRITE entity_changed ON entity \n    WHEN $event = \"UPDATE\"\n        AND $after.data != $before.data \n    THEN {\n        \n        CREATE entity_history:[$after.id, time::now()] SET\n            difference = value::diff($before.data, $after.data)\n    };"}